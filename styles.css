/* Quarto theme adjustments inspired by the original Hugo Book styling */
:root {
  --page-max-width: 1440px;        /* widen overall centered container */
  --content-max-width: 1120px;     /* widen body markdown column */
  --sidebar-bg: #f5f5f7;
  --sidebar-border: #e0e0e5;
  --heading-font: "IBM Plex Serif", "Times New Roman", "PingFang SC", serif;
  --body-font: "SF Pro", "PingFang SC", "Noto Serif", serif;
  --code-font: "JetBrains Mono", "Roboto Mono", ui-monospace, SFMono-Regular, Menlo, monospace;
  scroll-behavior: smooth;
}

body {
  font-family: var(--body-font);
  background-color: #fafafa;
  color: #1e1e24;
}

/* Main container accounts for fixed navbar */
#quarto-content {
  padding-top: 56px; /* Just navbar height, no extra margin */
}

/* Smooth scroll behavior for all scrollable elements */
html {
  scroll-behavior: smooth;
}

.quarto-margin-sidebar, .sidebar {
  scroll-behavior: smooth;
}

.quarto-title-block .title {
  font-family: var(--heading-font);
  font-weight: 600;
  letter-spacing: 0.02em;
}

h1, h2, h3, h4, h5, h6 {
  font-family: var(--heading-font);
  color: #0d0d0f;
}

.sidebar {
  background: transparent;
  border-right: none !important; /* Remove vertical divider */
  box-shadow: none !important;   /* Remove inset divider if theme uses it */
  font-size: 0.95rem;
}

.sidebar .nav-link { border-radius: 8px; padding: 0.5rem 0.75rem; transition: background-color .15s ease, color .15s ease, transform .1s ease; }
.sidebar .nav-link:hover { background-color: rgba(0,0,0,0.04); color: #0d0d0f; }
.sidebar .nav-link:active { transform: translateY(1px); }

.sidebar .nav-link.active { background-color: rgba(27,31,35,.08); color: #111827; font-weight: 600; }

#quarto-sidebar { background: transparent; border-right: none !important; box-shadow: none !important; /* Remove vertical divider */ }
#quarto-sidebar .sidebar-menu-container { padding-right: 0.5rem; }
#quarto-sidebar .sidebar-section { margin-bottom: 0.6rem; }
#quarto-sidebar .collapse, #quarto-sidebar .collapsing { transition: none !important; }
#quarto-sidebar .collapse.show { transition: none !important; }

/* Hide toggle icons - make folder names clickable to expand */
#quarto-sidebar .sidebar-item-toggle { display: none !important; }

/* Make the entire folder item clickable for accordion behavior */
#quarto-sidebar .sidebar-item { cursor: pointer; }


.sidebar-title {
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  font-size: 0.75rem;
  color: #6b7280;
}

.page-columns { max-width: var(--page-max-width) !important; margin: 0 auto; }

main.content { padding: 2rem 2rem; }

/* Some themes draw the divider on the content column instead of the sidebar */
.page-columns .content,
main.content {
  border-left: none !important;
  box-shadow: none !important;
}

.page-brand {
  font-family: var(--heading-font);
  font-size: clamp(2.1rem, 2.6vw, 3rem);
  font-weight: 500;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  color: #1a1a1d;
}

/* ========================================
   NAVBAR STYLING - Modify here for navbar appearance
   ======================================== */
.navbar { 
  position: fixed !important;
  top: 0;
  left: 0;
  right: 0;
  z-index: 1030;
  border-bottom: 1px solid rgba(229, 231, 235, 0.3); 
  background: rgba(255, 255, 255, 0.95); 
  backdrop-filter: blur(10px);
  transition: opacity 0.3s ease, background 0.3s ease, border-color 0.3s ease;
}

/* Transparent state when scrolling down - EVERYTHING fades out */
.navbar.navbar-transparent {
  opacity: 0;
  pointer-events: none; /* Can't click on invisible navbar */
}

/* Disable Quarto's default headroom behavior */
.headroom, .headroom--pinned, .headroom--unpinned { 
  transform: none !important; 
  transition: none !important; 
  position: fixed !important;
}


.navbar .navbar-brand {
  font-family: var(--heading-font);
  text-transform: uppercase;
  letter-spacing: 0.06em;
}

.navbar .nav-link {
  font-weight: 500;
}

/* Navbar search styling */
.navbar .quarto-search { max-width: 340px; }
.navbar .quarto-search .aa-Input, .navbar .quarto-search input[type="search"] {
  border-radius: 9999px;
  padding: 0.5rem 1rem;
  background: #f3f4f6;
  border: 1px solid #e5e7eb;
}
.navbar .quarto-search .aa-Input:focus { background: #fff; box-shadow: 0 0 0 3px rgba(99,102,241,0.25); border-color: #a5b4fc; }

pre code, code {
  font-family: var(--code-font);
  font-size: 0.8rem;
  line-height: 1.4;
}

/* ========================================
   CODE BLOCKS - Unified styling for all fenced code
   Works for both plain fenced blocks and Quarto-highlighted blocks
   ======================================== */
/* Base variables */
:root {
  --code-bg: #f7f7f9;
  --code-border: #e5e7eb;
  --code-accent: #276fb4; /* default if language not mapped below */
}

/* Base style for any pre (plain) and highlighted blocks */
pre,
pre.sourceCode {
  position: relative;
  background: var(--code-bg);
  border-radius: 8px;
  padding: 0.75rem 1rem 1.5rem; /* scaled down padding, extra bottom for copy button */
  border: 1px solid var(--code-border);
  box-shadow: 0 1px 0 rgba(0,0,0,0.02);
  border-left: 3px solid var(--code-accent);
  max-width: 100%;
  overflow-x: auto;
}

/* Small language pill label (shown when we know the language) */
pre.sourceCode::before {
  content: attr(data-lang);
  position: absolute;
  top: 6px;
  right: 8px;
  padding: 2px 6px;
  border-radius: 3px;
  font-size: 0.65rem;
  line-height: 1.1;
  color: #374151;
  background: rgba(0,0,0,0.06);
}

/* Map common languages to accent colors and label text */
pre.sourceCode.bash { --code-accent: #3e4349; }
pre.sourceCode.bash::before { content: "Bash"; }

pre.sourceCode.sh { --code-accent: #3e4349; }
pre.sourceCode.sh::before { content: "Shell"; }

pre.sourceCode.python { --code-accent: #3776ab; }
pre.sourceCode.python::before { content: "Python"; }

pre.sourceCode.julia { --code-accent: #9558b2; }
pre.sourceCode.julia::before { content: "Julia"; }

pre.sourceCode.r { --code-accent: #198ce7; }
pre.sourceCode.r::before { content: "R"; }

pre.sourceCode.js, pre.sourceCode.javascript { --code-accent: #f0db4f; }
pre.sourceCode.js::before, pre.sourceCode.javascript::before { content: "JavaScript"; }

pre.sourceCode.ts, pre.sourceCode.typescript { --code-accent: #3178c6; }
pre.sourceCode.ts::before, pre.sourceCode.typescript::before { content: "TypeScript"; }

pre.sourceCode.yaml, pre.sourceCode.yml { --code-accent: #cb8a00; }
pre.sourceCode.yaml::before, pre.sourceCode.yml::before { content: "YAML"; }

pre.sourceCode.json { --code-accent: #9c27b0; }
pre.sourceCode.json::before { content: "JSON"; }

pre.sourceCode.html { --code-accent: #e34c26; }
pre.sourceCode.html::before { content: "HTML"; }

pre.sourceCode.css { --code-accent: #563d7c; }
pre.sourceCode.css::before { content: "CSS"; }

/* Place the Quarto copy button at right-bottom to avoid label overlap */
.code-copy-button { 
  position: absolute; 
  bottom: 6px; 
  right: 8px; 
  z-index: 2;
  padding: 0.25rem 0.5rem;
  font-size: 0.75rem;
}

/* Ensure the wrapper is the positioning context for the copy button */
.code-copy-outer-scaffold { position: relative; }

/* ========================================
   LISTING PAGES - Beautiful folder index design
   ======================================== */
.quarto-listing {
  margin-top: 2rem;
}

.quarto-listing-default .list {
  display: grid;
  gap: 1.25rem;
  padding: 0;
  list-style: none;
}

/* Ensure listing cards don't squeeze to center */
.quarto-listing-default .quarto-post { 
  display: block; 
  max-width: none; 
}

.quarto-listing-default .list > div,
.quarto-listing-default .quarto-post {
  background: #fafafa !important;
  border: 1px solid #e5e7eb !important;
  border-radius: 8px !important;
  padding: 1.25rem 1.5rem !important;
  transition: all 0.2s ease !important;
  box-shadow: 0 1px 2px rgba(0,0,0,0.04) !important;
}

.quarto-listing-default .list > div:hover,
.quarto-listing-default .quarto-post:hover {
  border-color: #276fb4 !important;
  box-shadow: 0 4px 12px rgba(39, 111, 180, 0.1) !important;
  transform: translateY(-1px) !important;
}

.quarto-listing-default .listing-title {
  font-size: 1.1rem;
  font-weight: 600;
  margin: 0 0 0.5rem 0;
  color: #1f2937;
}

.quarto-listing-default .listing-title a {
  color: #276fb4;
  text-decoration: none;
  transition: color 0.15s ease;
}

.quarto-listing-default .listing-title a:hover {
  color: #1e5a8f;
  text-decoration: underline;
}

.quarto-listing-default .listing-subtitle,
.quarto-listing-default .listing-description {
  font-size: 0.9rem;
  color: #6b7280;
  margin: 0.25rem 0;
  line-height: 1.6;
}

.quarto-listing-default .listing-categories {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  margin-top: 0.75rem;
}

.quarto-listing-default .listing-category {
  background: #e0f2fe;
  color: #0369a1;
  padding: 0.25rem 0.75rem;
  border-radius: 4px;
  font-size: 0.8rem;
  font-weight: 500;
}

/* List layout improvements */
.quarto-listing-default.quarto-listing-cols-1 .list {
  grid-template-columns: 1fr;
}

.quarto-listing-default.quarto-listing-cols-2 .list {
  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
}

/* Nested section headings in listings */
.quarto-listing h2 {
  font-size: 1.5rem;
  font-weight: 600;
  color: #111827;
  margin-top: 2.5rem;
  margin-bottom: 1rem;
  padding-bottom: 0.5rem;
  border-bottom: 2px solid #e5e7eb;
}

.quarto-listing h3 {
  font-size: 1.2rem;
  font-weight: 600;
  color: #374151;
  margin-top: 1.5rem;
  margin-bottom: 0.75rem;
}

/* ========================================
   TOC CUSTOMIZATION
   ======================================== */
/* Hide ToC title only (localized). Do NOT hide first heading */
#toc-title { display: none !important; }

/* ========================================
   SIDEBAR SPACING - add room before divider
   ======================================== */
@media (min-width: 992px) {
  /* Give breathing space between items/toggles and the vertical divider */
  #quarto-sidebar .sidebar-header,
  #quarto-sidebar .sidebar-menu-container,
  #quarto-sidebar .sidebar-item-container {
    padding-right: 1rem; /* space for toggle icon before the divider */
  }

  /* Extend the left edge and keep the right edge fixed */
  #quarto-sidebar {
    width: 320px;                 /* widen by 40px */
    transform: translateX(-40px); /* shift left by 40px */
  }

  /* Ensure parent containers don't clip the shift */
  #quarto-content, .sidebar-navigation.docked { overflow: visible; }

  /* Increase main content width (override Quarto defaults) */
  .content { max-width: var(--content-max-width) !important; }

  /* Make top-level folder names bold */
  #quarto-sidebar .sidebar-item.sidebar-item-section > .sidebar-item-container > a.sidebar-item-text {
    font-weight: 700;
  }

  /* Increase indentation for nested levels */
  #quarto-sidebar .sidebar-section.depth1 .sidebar-item-container,
  #quarto-sidebar .sidebar-section.depth1 > li > .sidebar-item-container,
  #quarto-sidebar .sidebar-section.depth1 > li > a.sidebar-item-toggle { padding-left: 0.75rem; }

  #quarto-sidebar .sidebar-section.depth2 .sidebar-item-container,
  #quarto-sidebar .sidebar-section.depth2 > li > .sidebar-item-container,
  #quarto-sidebar .sidebar-section.depth2 > li > a.sidebar-item-toggle { padding-left: 1.5rem; }

  #quarto-sidebar .sidebar-section.depth3 .sidebar-item-container,
  #quarto-sidebar .sidebar-section.depth3 > li > .sidebar-item-container,
  #quarto-sidebar .sidebar-section.depth3 > li > a.sidebar-item-toggle { padding-left: 2.25rem; }
}

/* Ensure Quarto sets language class and we backfill label from class name */
/* The pandoc/quarto HTML already sets classes like pre.sourceCode.python.
   The rules above set the accent color and label via ::before per language. */


blockquote {
  font-style: italic;
  border-left: 3px solid #d1d5db;
  padding-left: 1rem;
  color: #4b5563;
  background-color: rgba(209, 213, 219, 0.15);
}

a {
  color: #276fb4;
}

a:hover {
  color: #1b4f82;
}

.callout {
  border-radius: 12px;
  border: 1px solid rgba(0, 0, 0, 0.04);
}

.table-striped > tbody > tr:nth-of-type(odd) > * {
  --bs-table-bg-type: rgba(0, 0, 0, 0.015);
}

img {
  border-radius: 12px;
}

@media (max-width: 991px) {
  main.content {
    padding: 1.75rem 1.5rem;
  }
}

/* ========================================
   TABLE OF CONTENTS (TOC) STYLING - Right sidebar
   Modify here for TOC appearance
   ======================================== */
/* Use both class and id to ensure override across Quarto versions */
.quarto-margin-sidebar, #quarto-margin-sidebar, aside.margin-sidebar { 
  position: sticky !important; 
  top: 100px !important; /* space for navbar while sticky */
  max-height: calc(100vh - 100px) !important; 
  overflow-y: auto; 
  background: transparent; 
  border-left: none !important; /* remove framework vertical line */
  width: clamp(220px, 22vw, 360px);
  /* Smart right push: on wide screens push to viewport edge, else 0 */
  margin-right: min(calc((100vw - var(--page-max-width)) / -2 + 1rem), 0px) !important;
}

/* remove any residual borders/lines inside the TOC */
#quarto-margin-sidebar nav, 
#quarto-margin-sidebar .nav, 
#quarto-margin-sidebar .toc-actions, 
.quarto-margin-sidebar nav {
  border: transparent !important;
}

/* TOC links styling */
.quarto-margin-sidebar .toc-actions a,
.quarto-margin-sidebar nav a {
  color: inherit;              /* use theme/default text color */
  transition: color 0.15s ease, background-color 0.15s ease;
}

.quarto-margin-sidebar .toc-actions a:hover,
.quarto-margin-sidebar nav a:hover {
  color: #111827;
  background: transparent !important;  /* no hover background for toc */
}

.quarto-margin-sidebar nav a.active {
  color: #276fb4;                               /* blue text like theme */
  background: rgba(0,0,0,0.06) !important;      /* gray active bg */
  font-weight: 600;
}

/* TOC item styling: remove blue left shadow/pill, make items fully transparent */
#quarto-margin-sidebar nav a,
#quarto-margin-sidebar .nav-link,
.quarto-margin-sidebar nav a {
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;      /* remove any inset left glow */
  border-radius: 0 !important;      /* remove rounded pill */
}

#quarto-margin-sidebar nav a.active,
#quarto-margin-sidebar .nav .active > .nav-link,
.quarto-margin-sidebar nav a.active {
  border: none !important;
  box-shadow: none !important;
}

/* remove any decorative left bars used by themes */
#quarto-margin-sidebar nav a::before,
#quarto-margin-sidebar .nav-link::before,
.quarto-margin-sidebar nav a::before {
  content: none !important;
  display: none !important;
}

/* ensure no list borders leak through */
#quarto-margin-sidebar li,
.quarto-margin-sidebar li {
  border: none !important;
}

/* ========================================
   LEFT SIDEBAR (MENU) STYLING
   Modify here for menu appearance
   ======================================== */
.sidebar { 
  padding-left: 0.25rem;             /* shift items slightly left */
  background: transparent;
  position: sticky;
  top: 5rem;                         /* reduce default top margin by half */
  max-height: calc(100vh - 140px);
  overflow-y: auto;
  will-change: auto; /* Smooth scrolling performance */
}

/* Slightly widen body column on wide screens */
@media (min-width: 1200px) {
  .page-columns .content { padding-right: 2.25rem; max-width: var(--content-max-width) !important; }
}

/* ========================================
   TOC ACTIVE/HOVER – FORCE GRAY BG, NO BLUE LEFT SHADOW
   High-specificity rules placed at end to win cascade
   ======================================== */
#quarto-margin-sidebar .nav.nav-pills .nav-link {
  background-color: transparent !important;
  border: 0 !important;
  box-shadow: none !important; /* remove blue inset/left glow */
}

#quarto-margin-sidebar .nav.nav-pills .nav-link:hover {
  background-color: transparent !important; /* no hover background for toc */
  box-shadow: none !important;
}

#quarto-margin-sidebar .nav.nav-pills .nav-link.active,
#quarto-margin-sidebar .nav.nav-pills .show > .nav-link,
#quarto-margin-sidebar .toc-active > .nav-link {
  background-color: rgba(0,0,0,0.06) !important; /* gray active */
  color: #276fb4 !important;                   /* restore blue active text */
  box-shadow: none !important;                 /* remove blue shadow */
  border-left: none !important;
}

#quarto-margin-sidebar .nav.nav-pills .nav-link.active::before,
#quarto-margin-sidebar .nav.nav-pills .nav-link::before {
  content: none !important; /* remove decorative left bar if present */
}

/* Ultra-specific fallback to ensure active item shows gray bg on all markups */
#quarto-margin-sidebar .active,
#quarto-margin-sidebar .active > a,
#quarto-margin-sidebar .nav .active > .nav-link,
#quarto-margin-sidebar .toc-active,
#quarto-margin-sidebar .toc-active > a,
#quarto-margin-sidebar .toc-active > .nav-link {
  background-color: rgba(0,0,0,0.06) !important; /* force gray bg */
  border-radius: 4px !important;
  box-shadow: none !important; /* remove blue shadow */
  border: none !important;
}

/* Hover fallback */
#quarto-margin-sidebar a.nav-link:hover,
#quarto-margin-sidebar .nav-link:hover,
#quarto-margin-sidebar .nav .nav-link:hover {
  background-color: transparent !important;
  box-shadow: none !important;
}

/* Ensure active ToC link is blue regardless of fallbacks */
#quarto-margin-sidebar nav a.nav-link.active,
#quarto-margin-sidebar nav a.active,
#quarto-margin-sidebar #TOC a.nav-link.active {
  color: #3a27b4 !important;
}

/* ========================================
   TOC CONTAINER GRAY BACKGROUND FIX
   Remove any background on the overall ToC panel and title while
   preserving the active item highlight set above.
   ======================================== */
#quarto-margin-sidebar #TOC,
#quarto-margin-sidebar #toc-title,
#quarto-margin-sidebar #TOC ul,
#quarto-margin-sidebar #TOC li {
  background: transparent !important;
}
