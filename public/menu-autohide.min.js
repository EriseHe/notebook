document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".book-menu");if(!e)return;let n;const r=8e3;let t=!1,i=!0,a=!1;const c=e.offsetWidth,l=Math.max(c*1.5,250);function d(){!t&&i&&e.classList.add("auto-hidden")}function s(){e.classList.remove("auto-hidden"),n&&clearTimeout(n)}function o(){t||(n&&clearTimeout(n),n=setTimeout(d,r))}e.addEventListener("mouseenter",function(){t=!0,s()}),e.addEventListener("mouseleave",function(n){(!n.relatedTarget||!e.contains(n.relatedTarget))&&(t=!1,setTimeout(()=>{t||o()},50))}),e.addEventListener("click",function(e){(e.target.tagName==="A"||e.target.closest("a"))&&(a=!0,s(),setTimeout(()=>{a=!1,t||o()},500))}),window.addEventListener("focus",function(){i=!0}),window.addEventListener("blur",function(){i=!1,s()}),document.addEventListener("mousemove",function(n){e.classList.contains("auto-hidden")&&n.clientX<l&&(s(),setTimeout(()=>{t||o()},1e3))}),setTimeout(o,2e3)})