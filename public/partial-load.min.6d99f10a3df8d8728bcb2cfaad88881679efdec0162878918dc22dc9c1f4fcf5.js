function initializeComponents(){window.MathJax&&window.MathJax.typeset();const e=document.querySelectorAll(".book-page pre > code");e.length&&e.forEach(e=>{if(!e.parentNode.querySelector(".copy-code-button")){const t=document.createElement("button");t.className="copy-code-button",t.type="button",t.innerText="Copy",t.addEventListener("click",()=>{navigator.clipboard.writeText(e.textContent),t.innerText="Copied!",setTimeout(()=>{t.innerText="Copy"},2e3)}),e.parentNode.insertBefore(t,e)}});const t=document.getElementById("toc-control");if(t){const e=document.querySelector(".toc-entries");e&&e.offsetHeight?document.getElementById("book-toc").classList.remove("hidden"):document.getElementById("book-toc").classList.add("hidden")}}document.addEventListener("DOMContentLoaded",function(){const t=document.querySelectorAll(".book-menu a"),e=document.querySelector(".book-menu");t.forEach(n=>{n.addEventListener("click",function(n){if(this.hostname!==window.location.hostname||this.getAttribute("href").startsWith("#")||this.getAttribute("target")==="_blank")return;n.preventDefault(),e&&e.classList.remove("auto-hidden");const s=this.href;document.body.classList.add("loading"),window.history.pushState({url:s},"",s),fetch(s).then(e=>e.text()).then(n=>{const a=new DOMParser,s=a.parseFromString(n,"text/html"),o=s.querySelector(".book-page");o&&(document.querySelector(".book-page").innerHTML=o.innerHTML);const i=s.querySelector(".book-toc-content");if(i&&document.querySelector(".book-toc-content")&&(document.querySelector(".book-toc-content").innerHTML=i.innerHTML),document.title=s.title,t.forEach(e=>{e.classList.remove("active")}),this.classList.add("active"),initializeComponents(),document.body.classList.remove("loading"),e){const t=new Event("mouseenter");e.dispatchEvent(t)}}).catch(e=>{console.error("Error loading page:",e),window.location.href=s})})}),window.addEventListener("popstate",function(e){e.state&&e.state.url&&location.reload()})})