{{- $lang := (default "" .Attributes.lang) | lower -}}
{{- if eq $lang "tikz" -}}
{{/* Prefer pre-rendered static SVGs generated by scripts/render-tikz.js */}}
{{ $hash := (sha1 .Inner) }}
{{ $staticPath := printf "static/tikz/%s.svg" $hash }}
{{ $svg := readFile $staticPath }}
{{ if $svg }}
  <div class="tikz-svg">{{ $svg | safeHTML }}</div>
{{ else }}
  <script type="text/tikz">{{ .Inner | safeHTML }}</script>
{{ end }}
{{- else -}}
<pre><code class="language-{{ $lang }}">{{ .Inner | htmlEscape }}</code></pre>
{{- end -}}

<div class="code-block">
    <pre>
<code>{{ .Inner | safeHTML }}</code>
    </pre>
    <button class="copy-button">
        <img src="https://systemuicons.com/images/icons/replicate.svg" alt="copy the code" />
    </button>
</div>

